
--#SET TERMINATOR @

CREATE PROCEDURE TACHI.ROCINANTE.HOLDEN
  (IN numr INTEGER,
   IN deno INTEGER,
   OUT rslt INTEGER)
  DYNAMIC RESULT SETS 4
  BEGIN
   DECLARE ovfl CONDITION for SQLSTATE '22003';
   DECLARE CONTINUE HANDLER FOR ovfl
     RESIGNAL SQLSTATE '22375';
   IF deno = 0 THEN
     SIGNAL ovfl;
   ELSE
     SET rslt = numr / deno;
   END IF;
  END
;
@

CREATE PROCEDURE TACHI.ROCINANTE.HOLDEN
  DYNAMIC RESULT SET 8
  WRAPPED
  aeiouandsometimesY_asdf0qwerty:redorange3yellow
  greenblue_indigo:violet7theexpanse
;
@

CREATE PROCEDURE TACHI.ROCINANTE.HOLDEN
  RESULT SETS 15
;
@

CREATE PROCEDURE TACHI.ROCINANTE.HOLDEN
  RESULT SETS 16
;
@

CREATE PROCEDURE ROCINANTE.HOLDEN
  DYNAMIC RESULT SETS 23
;
@

CREATE PROCEDURE HOLDEN
  DYNAMIC RESULT SET 42
;
@

CREATE PROCEDURE DESTINY.YOUNG (IN CHLOE CHAR(4), OUT RUSH VARCHAR(9) )
VERSION V1
SPECIFIC DESTINY.YOUNG
NOT DETERMINISTIC
MODIFIES SQL DATA
READS SQL DATA
CONTAINS SQL
CALLED ON NULL INPUT
DYNAMIC RESULT SETS 1
DISALLOW DEBUG MODE
ALLOW DEBUG MODE
DISABLE DEBUG MODE
PARAMETER CCSID ASCII
PARAMETER CCSID EBCDIC
PARAMETER CCSID UNICODE
QUALIFIER SGU
PACKAGE OWNER SGU
PACKAGE OWNER SGU AS ROLE
PACKAGE OWNER SGU AS USER
ASUTIME NO LIMIT
ASUTIME LIMIT 42
COMMIT ON RETURN NO
COMMIT ON RETURN YES
AUTONOMOUS
INHERIT SPECIAL REGISTERS
DEFAULT SPECIAL REGISTERS
WLM ENVIRONMENT FOR DEBUG MODE CHEYANNE_MOUNTAIN
DEFER PREPARE
NODEFER PREPARE
CURRENT DATA NO
CURRENT DATA YES
DEGREE 1
DEGREE ANY
CONCURRENT ACCESS RESOLUTION USE CURRENTLY COMMITTED
CONCURRENT ACCESS RESOLUTION WAIT FOR OUTCOME
DYNAMICRULES RUN
DYNAMICRULES BIND
DYNAMICRULES DEFINEBIND
DYNAMICRULES DEFINERUN
DYNAMICRULES INVOKEBIND
DYNAMICRULES INVOKERUN
APPLICATION ENCODING SCHEME ASCII
APPLICATION ENCODING SCHEME EBCDIC
APPLICATION ENCODING SCHEME UNICODE
WITH EXPLAIN
WITHOUT IMMEDIATE WRITE
ISOLATION LEVEL CS
ISOLATION LEVEL RS
ISOLATION LEVEL RR
ISOLATION LEVEL UR
WITHOUT KEEP DYNAMIC
OPTHINT 'NO'
SQL PATH EARTH, SYSTEM PATH, SESSION USER, USER
QUERY ACCELERATION NONE
QUERY ACCELERATION ENABLE
QUERY ACCELERATION ENABLE WITH FAILBACK
QUERY ACCELERATION ELIGIBLE
QUERY ACCELERATION ALL
GET_ACCEL_ARCHIVE NO
GET_ACCEL_ARCHIVE YES
ACCELERATION WAITFORDATA 1234.5
ACCELERATOR FTL
RELEASE AT COMMIT
RELEASE AT DEALLOCATE
REOPT NONE
REOPT ALWAYS
REOPT ONCE
VALIDATE RUN
VALIDATE BIND
ROUNDING DEC_ROUND_CEILING
ROUNDING DEC_ROUND_DOWN
ROUNDING DEC_ROUND_FLOOR
ROUNDING DEC_ROUND_HALF_DOWN
ROUNDING DEC_ROUND_HALF_EVEN
ROUNDING DEC_ROUND_HALF_UP
ROUNDING DEC_ROUND_UP
DATE FORMAT ISO
DATE FORMAT EUR
DATE FORMAT USA
DATE FORMAT JIS
DATE FORMAT LOCAL
DECIMAL(15)
DECIMAL(31)
DECIMAL(15,0)
DECIMAL(31,0)
FOR UPDATE CLAUSE REQUIRED
FOR UPDATE CLAUSE OPTIONAL
TIME FORMAT ISO
TIME FORMAT EUR
TIME FORMAT USA
TIME FORMAT JIS
DATE FORMAT LOCAL
BUSINESS_TIME SENSITIVE YES
BUSINESS_TIME SENSITIVE NO
SYSTEM_TIME SENSITIVE YES
SYSTEM_TIME SENSITIVE NO
ARCHIVE SENSITIVE YES
ARCHIVE SENSITIVE NO
APPLCOMPAT V12R01M00
APPLCOMPAT V12R01
CONCENTRATE STATEMENTS OFF
CONCENTRATE STATEMENTS WITH LITERALS
LANGUAGE SQL
 P1:
(...)
@

CREATE PROCEDURE DESTINY.YOUNG (IN CHLOE CHAR(4), OUT RUSH VARCHAR(9) )
VERSION 1.0
NOT DETERMINISTIC
MODIFIES SQL DATA
CALLED ON NULL INPUT
DYNAMIC RESULT SETS 1
DISABLE DEBUG MODE
PARAMETER CCSID UNICODE
QUALIFIER SGU
PACKAGE OWNER SGU
ASUTIME NO LIMIT
COMMIT ON RETURN NO
INHERIT SPECIAL REGISTERS
WLM ENVIRONMENT FOR DEBUG MODE CHEYANNE_MOUNTAIN
NODEFER PREPARE
CURRENT DATA NO
DEGREE ANY
CONCURRENT ACCESS RESOLUTION USE CURRENTLY COMMITTED
DYNAMICRULES RUN
APPLICATION ENCODING SCHEME EBCDIC
WITH EXPLAIN
WITHOUT IMMEDIATE WRITE
ISOLATION LEVEL CS
WITHOUT KEEP DYNAMIC
OPTHINT ''
SQL PATH EARTH, SYSTEM PATH, SESSION USER, USER
QUERY ACCELERATION NONE
GET_ACCEL_ARCHIVE NO
ACCELERATION WAITFORDATA 1234.5
ACCELERATOR FTL
RELEASE AT COMMIT
REOPT NONE
VALIDATE RUN
ROUNDING DEC_ROUND_HALF_EVEN
DATE FORMAT ISO
DECIMAL(15)
FOR UPDATE CLAUSE REQUIRED
TIME FORMAT ISO
BUSINESS_TIME SENSITIVE YES
SYSTEM_TIME SENSITIVE YES
ARCHIVE SENSITIVE YES
APPLCOMPAT V12R01M00
CONCENTRATE STATEMENTS OFF
LANGUAGE SQL
 P1:
(...)
@


CREATE PROCEDURE DESTINY.YOUNG (IN CHLOE CHAR(4), OUT RUSH VARCHAR(9) )
VERSION ABLEBAKERCHARLIEDOGEASYFOX
LANGUAGE SQL
NOT DETERMINISTIC
MODIFIES SQL DATA
CALLED ON NULL INPUT
DYNAMIC RESULT SETS 1
DISABLE DEBUG MODE
PARAMETER CCSID UNICODE
QUALIFIER SGU
PACKAGE OWNER SGU
INHERIT SPECIAL REGISTERS
CURRENT DATA NO
DEGREE ANY
DYNAMICRULES RUN
WITH EXPLAIN
WITHOUT IMMEDIATE WRITE
ISOLATION LEVEL CS
NODEFER PREPARE
WITHOUT KEEP DYNAMIC
OPTHINT ''
COMMIT ON RETURN NO
RELEASE AT COMMIT
REOPT NONE
VALIDATE RUN
ROUNDING DEC_ROUND_HALF_EVEN
DECIMAL(15)
BUSINESS_TIME SENSITIVE YES
SYSTEM_TIME SENSITIVE YES
 ARCHIVE SENSITIVE YES
 CONCENTRATE STATEMENTS OFF
 P1:
(...)
@

--#SET TERMINATOR @
CREATE PROCEDURE DESTINY.YOUNG (IN CHLOE CHAR(4), OUT RUSH VARCHAR(9) )
LANGUAGE SQL
NOT DETERMINISTIC
MODIFIES SQL DATA
CALLED ON NULL INPUT
DYNAMIC RESULT SETS 1
DISABLE DEBUG MODE
PARAMETER CCSID UNICODE
QUALIFIER SGU
PACKAGE OWNER SGU
INHERIT SPECIAL REGISTERS
CURRENT DATA NO
DEGREE ANY
DYNAMICRULES RUN
WITH EXPLAIN
WITHOUT IMMEDIATE WRITE
ISOLATION LEVEL CS
NODEFER PREPARE
WITHOUT KEEP DYNAMIC
OPTHINT ''
COMMIT ON RETURN NO
RELEASE AT COMMIT
REOPT NONE
VALIDATE RUN
ROUNDING DEC_ROUND_HALF_EVEN
DECIMAL(15)
BUSINESS_TIME SENSITIVE YES
SYSTEM_TIME SENSITIVE YES
 ARCHIVE SENSITIVE YES
 CONCENTRATE STATEMENTS OFF
 P1:
CREATE UNIQUE INDEX I1 ON T1(C1)        
  GENERATE KEY USING XMLPATTERN                               
  'declare default element namespace "http://example.com"; /t1c1/@c1ID'                                       
   AS SQL VARCHAR(4)
;
@


CREATE PROCEDURE DESTINY.YOUNG (IN CHLOE CHAR(4), OUT RUSH VARCHAR(9) )
LANGUAGE SQL
NOT DETERMINISTIC
CONTAINS SQL
CALLED ON NULL INPUT
DYNAMIC RESULT SETS 42
DISABLE DEBUG MODE
PARAMETER CCSID EBCDIC
QUALIFIER SGU
PACKAGE OWNER SGU AS USER
INHERIT SPECIAL REGISTERS
CURRENT DATA NO
DEGREE ANY
DYNAMICRULES RUN
FOR UPDATE CLAUSE OPTIONAL
WITHOUT EXPLAIN
WITH IMMEDIATE WRITE
ISOLATION LEVEL CS
DEFER PREPARE
WITHOUT KEEP DYNAMIC
OPTHINT 'oh, anything, really'
AUTONOMOUS
ACCELERATOR HAMMOND
RELEASE AT DEALLOCATE
REOPT NONE
VALIDATE RUN
ROUNDING DEC_ROUND_HALF_EVEN
DECIMAL(15)
BUSINESS_TIME SENSITIVE YES
SYSTEM_TIME SENSITIVE NO
 ARCHIVE SENSITIVE YES
 CONCENTRATE STATEMENTS WITH LITERALS
APPLCOMPAT V12R01M00
CREATE OR REPLACE PROCEDURE TACHI.ROCINANTE.ALEX (
     IN    CHARACTER AS LOCATOR
    ,OUT    CHAR
    )
  SPECIFIC BEHEMOTH.DRUMMER
  EXTERNAL NAME IEFBR14
  LANGUAGE ASSEMBLE
  PARAMETER STYLE SIMPLE CALL
  NOT DETERMINISTIC
  PACKAGE PATH 'MARINERVALLEY'
  MODIFIES SQL DATA
  NO DBINFO
  COLLID AEIOU
  WLM ENVIRONMENT PROD002
  ASUTIME NO LIMIT
  STAY RESIDENT YES
  PROGRAM TYPE MAIN
  SECURITY DB2
  RUN OPTIONS 'ALL31(ON),HEAP(256K,256K,ANYWHERE,KEEP,8K,4K)'
  COMMIT ON RETURN YES
  INHERIT SPECIAL REGISTERS
  CALLED ON NULL INPUT
  STOP AFTER SYSTEM DEFAULT FAILURES
  DISABLE DEBUG MODE
;
@

CREATE PROCEDURE DESTINY.YOUNG (IN ELI CHAR(4), OUT RUSH VARCHAR(9) )
VERSION ABLEBAKERCHARLIEDOGEASYFOX
CREATE PROCEDURE DESTINY.SCOTT (IN CHLOE CHAR(4), OUT RUSH VARCHAR(9) )
VERSION ABLEBAKERCHARLIEDOGEASYFOX
CREATE PROCEDURE TACHI.ROCINANTE.HOLDEN
  EXTERNAL NAME IEFBR14
  LANGUAGE COBOL
;
@

CREATE PROCEDURE UPDATE_1
 (IN P1 CHAR(10),
 IN P2 DECIMAL(6,2))
 LANGUAGE SQL
 MODIFIES SQL DATA
  UPDATE T1
  SET C1 = C1 * P2
  WHERE K1 = P1
  ;
@

CREATE PROCEDURE UPDATE_1
 (IN P1 CHAR(10),
 IN P2 DECIMAL(6,2))
 LANGUAGE SQL
 MODIFIES SQL DATA
 DETERMINISTIC
 COMMIT ON RETURN YES
   UPDATE T1
   SET C1 = C1 * P2
   WHERE K1 = P1
   ;
@

--copyright (c) IBM 2022
CREATE PROCEDURE GETWEEKENDS(IN MYDATES DATEARRAY, OUT WEEKENDS DATEARRAY)
 BEGIN
  -- ARRAY INDEX VARIABLES
  DECLARE DATEINDEX, WEEKENDINDEX INT DEFAULT 1;
  -- VARIABLE TO STORE THE ARRAY LENGTH OF MYDATES,
  -- INITIALIZED USING THE CARDINALITY FUNCTION.
  DECLARE DATESCOUNT INT;
  SET DATESCOUNT = CARDINALITY(MYDATES);
  -- FOR EACH DATE IN MYDATES, IF THE DATE IS A SUNDAY OR SATURDAY,
  -- ADD IT TO THE OUTPUT ARRAY NAMED "WEEKENDS"
  WHILE DATEINDEX <= DATESCOUNT DO
   IF DAYOFWEEK(MYDATES[DATEINDEX]) IN (1, 7) THEN
    SET WEEKENDS[WEEKENDINDEX] = MYDATES[DATEINDEX];
    SET WEEKENDINDEX = WEEKENDINDEX + 1;
   END IF;
   SET DATEINDEX = DATEINDEX + 1;
  END WHILE;
 END
 ;
@

CREATE PROCEDURE GET_PHONES(OUT EPHONES PHONELIST)
 BEGIN
  SELECT ARRAY_AGG(PHONENUMBER)
   INTO EPHONES
   FROM T1
   WHERE ID = 1810;
 END
@

