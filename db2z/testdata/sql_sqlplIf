
--#SET TERMINATOR @

CREATE OR REPLACE TRIGGER TRIG001
  BEFORE INSERT ON T1
  REFERENCING NEW AS NEW
  FOR EACH ROW
  WHEN (NEW.C1 IS NULL OR NEW.C1 > '20:30')
    P1: BEGIN
      IF (NEW.C1 IS NULL) THEN
        IF (NEW.C2 IS NULL) THEN
          IF (NEW.C3 IS NULL) THEN
            IF (NEW.C4 IS NULL) THEN
              IF (NEW.C5 IS NULL) THEN
                SET NEW.C1 = NEW.C2 + 1 HOUR;
              END IF;
            END IF;
          END IF;
        END IF;
      END IF;
      IF (NEW.C1 > '20:30') THEN
        SIGNAL SQLSTATE '27182'
          SET MESSAGE_TEXT = 'this is a bad time';
      END IF;
    END
@


